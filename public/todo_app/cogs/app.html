<blueprint>

    <!-- preload ensures the following cogs will be downloaded before the init method for this cog is called, this can improve page renders   -->
    <preload url="footer.html" />
    <preload url="header.html" />
    <preload url="main.html" />
    <preload url="item.html" />
    <preload url="itemEdit.html" />
    <preload url="itemView.html" />

    <!-- alloys are function only cogs that are loaded above this cog in the cog tree
        functions and data points in alloys will be accessible from this cog
    -->
    <alloy url="../alloys/storage.html" />
    <alloy url="../alloys/routes.html" />

    <!-- this sensor watches the storage data point in the storage alloy above
        Sensors normally fire on any data change,
        however, this one will convert how it view the data with the "hasItems" function (below)
        and the run "render" function if the converted data changes
        In this case, it will display the items list if there are saved list items in storage.
    -->
    <sensor watch="storage" adapt="hasItems" change="true" run="render" />

    <!-- load the following cogs into the tags with the given id -->
    <cog find="main" url="main.html" />
    <cog find="header" url="header.html" />
    <cog find="footer" url="footer.html" />

</blueprint>

<display>

    <div id="app">

        <section class="id_todoapp">
            <!-- cog with given ids are accessible from the this scope below-->
            <!-- ids will change to be unique on render in the browser -->
            <header class="id_header" id="header" ></header>
            <section class="id_main" id="main" ></section>
            <footer class="id_footer" id="footer" ></footer>
        </section>

        <footer class="id_info" >
            <p>Double-click to edit a todo</p>
            <p>Created by <a href="https://github.com/DarkMarmot/">Scott Southworth</a> and <a href="https://github.com/landonbar/">Landon Barnickle</a></p>
            <p>Part of <a href="http://todomvc.com">TodoMVC</a></p>
        </footer>

    </div>

</display>


<script>
    $.cog({

        hasItems: function(msg) { return msg.length > 0; },

        render: function (msg) {
            var style = {visibility: msg ? 'visible' : 'hidden'};
            this.main.css(style);
            this.footer.css(style);
        }

    });
</script>