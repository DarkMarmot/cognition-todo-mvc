<blueprint>

    <command name="cmd_TextEntry" filter="hasText" pipe="cmd_CreateTodo" />
    <sensor node="newTodo" on="keydown" filter="isEnter" transform="trimText" pipe="cmd_TextEntry" />
    <sensor watch="cmd_CreateTodo" run="clearEntry" />
    <sensor node="markAll" on="click" pipe="cmd_MarkAll" />
    <cog find="markAll" url="buttons/markAllButton.html" />

</blueprint>


<display>
    <div style="padding-top: 12px;">
        <div id="markAll" style="position: absolute; z-index: 3;"></div>
        <input id="newTodo" style="    padding: 16px 16px 16px 60px;
    border: none;
    background: rgb(31, 33, 30);
    outline-style: none;
    z-index: 2;
    box-shadow: inset 0 1px 3px rgba(0,0,0,.5);
    position: relative;
    margin: 0;
    width: 100%;
    font-size: 24px;
    line-height: 1.4em;
    color: #647C55;
    box-sizing: border-box;" placeholder="What needs to be done?" autofocus>
    </div>

</display>


<script>
    $.cog({

        ENTER_KEY: 13,

        isEnter: function(ev){
            return ev.which === this.ENTER_KEY;
        },

        trimText: function(){
            return this.newTodo.val().trim();
        },

        hasText: function(msg){
            return msg.length > 0;
        },

        clearEntry: function(msg,topic,tag){
            this.newTodo.val('');
        }


    });
</script>